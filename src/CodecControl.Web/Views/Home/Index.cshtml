
@{
    ViewData["Title"] = "Index";
}

<h2>Codec Control</h2>
<div class="small">@DateTime.Now</div>
<div class="small">Version @ViewData["Version"]</div>
<br />

<div id="app">
    <div class="codecs" v-for="codec in codecs">
        <div class="codec-name">{{codec.sipAddress}}</div>
        <button v-on:click="subscribe(codec.sipAddress)">Subscribe</button>
        <button v-on:click="unsubscribe(codec.sipAddress)">Unsubscribe</button>
        <span class="right">
            Rx {{codec.audioStatus.vuValues.rxLeft}} / {{codec.audioStatus.vuValues.rxRight}}
            Tx:{{codec.audioStatus.vuValues.txLeft}} / {{codec.audioStatus.vuValues.txRight}}
        </span>
        <span class="updated">{{codec.updated}}</span>
    </div>
    
    <div>
        <div class="subheader">Aktuella prenumerationer</div>
        <button v-on:click="getSubscriptions">Ladda om</button>
        <table v-if="subscriptions.length > 0">
            <thead>
            <tr>
                <th>Connection id</th>
                <th>Sip address</th>

            </tr>
            </thead>
            <tr v-for="subscription in subscriptions">
                <td>{{subscription.connectionId}}</td>
                <td>{{subscription.sipAddress}}</td>
            </tr>
        </table>
    </div>

    <div class="subheader">Styrbara ljudkodare</div>
    <button v-on:click="getCodecInformation">Ladda om</button>
    <table>
        <thead>
        <tr>
            <th>SipAddress</th>
            <th>IP</th>
            <th>API</th>
            <th>GPO-namn</th>
            <th>#Ingångar</th>
            <th>#GPO</th>
        </tr>
        </thead>
        <tr v-for="ci in codecInformation">
            <td v-for="value in ci">{{value}}</td>
        </tr>
    </table>

</div>

<style>

    body {
        margin: 25px;
        padding: 0;
        height: 100%;
        background-color: white;
        font-family: roboto, Arial, Helvetica, sans-serif;
        line-height: 2;
        color: #0F1525;
        font-size: 11pt;
    }

    small {
        font-size: xx-small;
    }

    .codecs {
        width: 700px;
    }

    .codec-name {
        width: 200px;
        float: left
    }

    .codecs button {
        width: 100px
    }

    .codecs span .right {
        float: right;
    }

    .codecs .updated {
        float: right;
        font-size: smaller;
    }

    .subheader {
        margin-top: 25px;
        font-size: large;
        font-weight: bold;
    }

    table {
        border: solid 1px black;
        line-height: 1;
    }

    th {
        font-size: small;
    }

    td {
        border-top: 0.1rem solid #c7c7c7;
        border-right: 0.1rem solid #c7c7c7;
        font-size: smaller;
    }
</style>

<script src="~/lib/signalr/dist/browser/signalr.js"></script>
<script src="~/lib/vue/dist/vue.js"></script>
<script src="~/lib/axios/dist/axios.js"></script>
<script src="~/js/codeccontrol.js"></script>





